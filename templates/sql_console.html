<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SQL Console - Student Support Center</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="page">
    <header class="top-bar">
      <div class="logo-circle">SSC</div>
      <h1>SQL Console</h1>
    </header>

    <main class="content">
      <div class="card hero">
        <h2>Run Read-Only SQL Queries</h2>
        <p>
          Enter a <strong>SELECT</strong> query against the
          <code>student_support_center.db</code> database.
        </p>
        <p style="margin-top: 0.5rem;">
          <a href="{{ url_for('home') }}" class="button-link secondary">
            ‚Üê Back to Dashboard
          </a>
        </p>
      </div>

      <div class="card">
        <form method="post" class="sql-form">
          <label for="query"><strong>SQL Query</strong></label>
          <textarea id="query"
                    name="query"
                    rows="6"
                    class="sql-textarea"
                    placeholder="Example: SELECT * FROM Student LIMIT 10;">{{ query }}</textarea>
          <div style="margin-top: 0.5rem;">
            <button type="submit" class="button-link">Run Query</button>
          </div>
        </form>

        {% if error %}
          <p class="error-message" style="margin-top: 0.75rem; color: #c0392b;">
            {{ error }}
          </p>
        {% endif %}
      </div>

      {% if rows and headers %}
        <div class="card" style="margin-top: 1rem;">
          <h3>Results</h3>
          <table class="table">
            <thead>
              <tr>
                {% for h in headers %}
                  <th>{{ h }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for row in rows %}
                <tr>
                  {% for h in headers %}
                    <td>{{ row[h] }}</td>
                  {% endfor %}
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% elif query and not error %}
        <div class="card" style="margin-top: 1rem;">
          <p>No rows returned.</p>
        </div>
      {% endif %}
    </main>
  </div>
</body>
</html>
